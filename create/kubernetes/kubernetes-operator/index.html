<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-create/kubernetes/kubernetes-operator/index-kubernetes-operator">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Kubernetes Operator: What It Is and Why You Should Really Care About It | The Home of Redis Developers</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.redis.com/img/redis-hero-image.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.redis.com/img/redis-hero-image.jpg"><meta data-rh="true" property="og:url" content="https://developer.redis.com/create/kubernetes/kubernetes-operator"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Kubernetes Operator: What It Is and Why You Should Really Care About It | The Home of Redis Developers"><meta data-rh="true" name="description" content="My Image"><meta data-rh="true" property="og:description" content="My Image"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://developer.redis.com/create/kubernetes/kubernetes-operator"><link data-rh="true" rel="alternate" href="https://developer.redis.com/create/kubernetes/kubernetes-operator" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.redis.com/create/kubernetes/kubernetes-operator" hreflang="x-default"><script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-W8Z6BLQ",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/assets/css/styles.b5561ee1.css">
<link rel="preload" href="/assets/js/runtime~main.bb8e0787.js" as="script">
<link rel="preload" href="/assets/js/main.953e99e4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W8Z6BLQ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:rgb(210, 215, 254);color:rgb(22 31 49)" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><div class="announcement-bar"><a href="https://redis.com/blog/introducing-redis-7-2/" target="_blank" rel="noopener"><span>Announcing Redis 7.2 and Enhanced Vector DB</span> <span style="margin-left:1rem">Learn more</span> <span style="margin-left:0.25rem">→</span></a></div></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-1.png" alt="Redis Developer Hub logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-1.png" alt="Redis Developer Hub logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><div id="redis-sitesearch" class="redis-sitesearch redis-sitesearch-inline"><input class="redis-sitesearch-input"><div class="redis-sitesearch-result-list-wrapper"><ul class="redis-sitesearch-result-list"></ul><div class="redisearch-logo"></div></div></div></div><a class="navbar__item navbar__link" href="/howtos/quick-start">Get started</a><a href="https://launchpad.redis.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Redis Launchpad<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://redis.com/try-free/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Try Free<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Kubernetes Operator: What It Is and Why You Should Really Care About It</h1></header><div class="docAuthors"><hr><div class="authorByline_VoxI"><img class="authorProfileImage_URwT" src="/img/profile_pic_ajeet_raina.jpg" alt="Profile picture for Ajeet Raina"><div><div class="authorLabel_a70t">Author:</div><div><a href="https://twitter.com/ajeetsraina" target="_blank">Ajeet Raina</a>, <!-- -->Former Developer Growth Manager at Redis</div></div></div><hr></div><p><img loading="lazy" alt="My Image" src="/assets/images/image1-1e92843037d483a8d50131ad0782ce81.png" width="1228" height="732" class="img_ev3q"></p><p><a href="https://kubernetes.io/" target="_blank" rel="noopener noreferrer">Kubernetes</a> is popular due to its capability to deploy new apps at a faster pace. Thanks to &quot;Infrastructure as data&quot; (specifically, YAML), today you can express all your Kubernetes resources such as <a href="https://kubernetes.io/docs/concepts/workloads/pods/" target="_blank" rel="noopener noreferrer">Pods</a>, <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" target="_blank" rel="noopener noreferrer">Deployments</a>, <a href="https://kubernetes.io/docs/concepts/services-networking/service/" target="_blank" rel="noopener noreferrer">Services</a>, <a href="https://kubernetes.io/docs/concepts/storage/volumes/" target="_blank" rel="noopener noreferrer">Volumes</a>, etc., in a YAML file. These default objects make it much easier for DevOps and SRE engineers to fully express their workloads without the need to learn how to write code in a programming language like Python, Java, or Ruby.</p><p>Kubernetes is designed for automation. Out of the box, you get lots of built-in automation from the core of Kubernetes. It can speed up your development process by making easy, automated deployments, updates (rolling update), and by managing your apps and services with almost zero downtime. However, Kubernetes can’t automate the process natively for stateful applications. For example, say you have a stateful workload, such as a database application, running on several nodes. If a majority of nodes go down, you’ll need to reload the database from a specific snapshot following specific steps. Using existing default objects, types, and controllers in Kubernetes, this would be impossible to achieve.</p><p>Think of scaling nodes up, or upgrading to a new version, or disaster recovery for your stateful application — these kinds of operations often need very specific steps, and typically require manual intervention. Kubernetes cannot know all about every stateful, complex, clustered application. Kubernetes, on its own, does not know the configuration values for, say, a Redis cluster, with its arranged memberships and stateful, persistent storage. Additionally, scaling stateful applications in Kubernetes is not an easy task and requires manual intervention.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="stateful-vs-stateless-applications">Stateful vs Stateless Applications<a class="hash-link" href="#stateful-vs-stateless-applications" title="Direct link to heading">​</a></h3><p>Let’s try to understand the difference between <a href="https://kubernetes.io/docs/tutorials/stateful-application/" target="_blank" rel="noopener noreferrer">stateful</a> versus <a href="https://kubernetes.io/docs/tutorials/stateless-application/" target="_blank" rel="noopener noreferrer">stateless</a> applications with a simple example. Consider a Kubernetes cluster running a simple web application (without any operator). The YAML file below allows you to create two replicas of NGINX (a stateless application).</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> kind: Deployment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   name: nginx-deployment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   namespace: web</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   selector:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     matchLabels:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       app: nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   replicas: 2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   template:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       labels:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         app: nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       containers:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       - name: nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         image: nginx:1.14.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         - containerPort: 80</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the example above, a Deployment object named <code>nginx-deployment</code> is created under a namespace “web,” indicated by the <code>.metadata.name</code> field. It creates two replicated Pods, indicated by the <code>.spec.replicas</code> field. The <code>.spec.selector</code> field defines how the Deployment finds which Pods to manage. In this case, you select a label that is defined in the Pod template (app: nginx). The template field contains the following subfields: the Pods are labeled <code>app: nginx</code> using the <code>.metadata.labels</code> field and the Pod template&#x27;s specification indicates that the Pods run one container, nginx, which runs the nginx Docker Hub image at version 1.14.2. Finally, it creates one container and names it nginx.</p><p>Run the command below to create the Deployment resource:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create -f nginx-dep.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let us verify if the Deployment was created successfully by running the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> kubectl get deployments</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> NAME               READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> nginx-deployment   2/2     2            2           63s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The example above shows the name of the Deployment in the namespace. It also displays how many replicas of the application are available to your users. You can also see that the number of desired replicas that have been updated to achieve the desired state is 2.</p><p><img loading="lazy" alt="alt_text" src="/assets/images/image2-0cc6134e38326b6b06aac1e0dfc25f69.png" width="1722" height="1324" class="img_ev3q"></p><p>You can run the <code>kubectl describe</code> command to get detailed information of deployment resources. To show details of a specific resource or group of resources:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> kubectl describe deploy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Name:                   nginx-deployment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Namespace:              default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> CreationTimestamp:      Mon, 30 Dec 2019 07:10:33 +0000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Labels:                 &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Annotations:            deployment.kubernetes.io/revision: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Selector:               app=nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Replicas:               2 desired | 2 updated | 2 total | 0 available | 2 unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> StrategyType:           RollingUpdate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> MinReadySeconds:        0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> RollingUpdateStrategy:  25% max unavailable, 25% max surge</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Pod Template:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Labels:  app=nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Containers:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    nginx:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Image:        nginx:1.7.9</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Port:         80/TCP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Host Port:    0/TCP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Environment:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Mounts:       &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Volumes:        &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Conditions:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Type           Status  Reason</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   ----           ------  ------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Available      False   MinimumReplicasUnavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Progressing    True    ReplicaSetUpdated</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> OldReplicaSets:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> NewReplicaSet:   nginx-deployment-6dd86d77d (2/2 replicas created)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Events:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Type    Reason             Age   From                   Message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   ----    ------             ----  ----                   -------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Normal  ScalingReplicaSet  90s   deployment-controller  Scaled up replica set nginx-deployment-6dd86d77d to 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A Deployment is responsible for keeping a set of Pods running, but it’s equally important to expose an interface to these Pods so that the other external processes can access them. That’s where the Service resource comes in. The Service resource lets you expose an application running in Pods to be reachable from outside your cluster. Let us create a Service resource definition as shown below:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> LoadBalancer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above YAML specification creates a new Service object named &quot;nginx-service,&quot; which targets TCP port 80 on any Pod with the <code>app=nginx</code> label.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> kubectl get svc -n web</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> NAME            TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)        AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> nginx-service   LoadBalancer   10.107.174.108   localhost     80:31596/TCP   46s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="alt_text" src="/assets/images/image3-38ec17970520b64f9fa2f046f5c3f077.png" width="1556" height="1234" class="img_ev3q"></p><p>Let’s scale the Deployment to 4 replicas. We are going to use the <code>kubectl scale</code> command, followed by the deployment type, name, and desired number of instances. The output is similar to this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl scale deployments/nginx-deployment --replicas=4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">deployment.extensions/nginx-deployment scaled</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The change was applied, and we have 4 instances of the application available. Next, let’s check if the number of Pods changed. There should now be 4 Pods running in the cluster (as shown in the diagram below)</p><p><img loading="lazy" alt="alt_text" src="/assets/images/image4-755bd50b0b5593c478633052ab0fdaec.png" width="2040" height="1412" class="img_ev3q"></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> kubectl get deployments</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> NAME               READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> nginx-deployment   </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain">/4     </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain">            </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain">           4m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>There are 4 Pods, with different IP addresses. The change was registered in the Deployment events log.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> kubectl get pods -o wide</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> NAME                               READY   STATUS    RESTARTS   AGE     IP           NODE             NOMINATED NODE   READINESS GATES</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> nginx-deployment-6dd86d77d-b4v7k   1/1     Running   0          4m32s   10.1.0.237   docker-desktop   none             none</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> nginx-deployment-6dd86d77d-bnc5m   1/1     Running   0          4m32s   10.1.0.236   docker-desktop   none             none</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> nginx-deployment-6dd86d77d-bs6jr   1/1     Running   0          86s     10.1.0.239   docker-desktop   none             none</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> nginx-deployment-6dd86d77d-wbdzv   1/1     Running   0          86s     10.1.0.238   docker-desktop   none             none</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Deleting one of the web server Pods triggers work in the control plane to restore the desired state of four replicas. Kubernetes starts a new Pod to replace the deleted one. In this excerpt, the replacement Pod shows a STATUS of ContainerCreating:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> kubectl delete pod nginx-deployment-6dd86d77d-b4v7k</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You will notice that the Nginx static web server is interchangeable with any other replica, or with a new Pod that replaces one of the replicas. It doesn’t store data or maintain state in any way. Kubernetes doesn’t need to make any special arrangements to replace a failed Pod, or to scale the application by adding or removing replicas of the server. Now you might be thinking, what if you want to store the state of the application? Great question.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="scaling-stateful-application-is-hard">Scaling stateful application is hard<a class="hash-link" href="#scaling-stateful-application-is-hard" title="Direct link to heading">​</a></h3><p>Scaling stateless applications in Kubernetes is easy but it’s not the same case for stateful applications. Stateful applications require manual intervention. Bringing Pods up and down is not that simple. Each Node has an identity and some data attached to it. Removing a Pod means losing its data and disrupting the system.</p><p><img loading="lazy" alt="alt_text" src="/assets/images/image5-b3e307cfb5e6d5aba45f164f9d6d1629.png" width="2268" height="1422" class="img_ev3q"></p><p>Consider a Kubernetes cluster with 6 worker Nodes hosting a Nginx web application connected to a persistent volume as shown above. Here is the snippet of StatefulSets YAML file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: StatefulSet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: web</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  serviceName: &quot;nginx&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  replicas: 2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      app: nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        app: nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - name: nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        image: nginx:1.14.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        - containerPort: 80</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          name: web</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        volumeMounts:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        - name: www</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          mountPath: /usr/share/nginx/html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  volumeClaimTemplates:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  - metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      name: www</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      accessModes: [ &quot;ReadWriteOnce&quot; ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      resources:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        requests:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          storage: 1Gi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Kubernetes makes physical storage devices available to your cluster in the form of objects called <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/" target="_blank" rel="noopener noreferrer">Persistent Volumes</a>. Each of these Persistent Volumes is consumed by a Kubernetes Pod by issuing a <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/#claims-as-volumes" target="_blank" rel="noopener noreferrer">PersistentVolumeClaim</a> object, also known as PVC. A PVC object lets Pods use storage from Persistent Volumes. Imagine a scenario in which we want to downscale a cluster from 5 Nodes to 3 Nodes. Suddenly removing 2 Nodes at once is a potentially destructive operation. This might lead to the loss of all copies of the data. A better way to handle Node removal would be to first migrate data from the Node to be removed to other Nodes in the system before performing the actual Pod deletion. It is important to note that the StatefulSet controller is necessarily generic and cannot possibly know about every possible way to manage data migration and replication. In practice, however, StatefulSets are rarely enough to handle complex, distributed stateful workload systems in production environments.</p><p><strong>Now the question is, how to solve this problem? </strong>Enter Operators. Operators were developed to handle the sophisticated, stateful applications that the default Kubernetes controllers aren’t able to handle. While Kubernetes controllers like <a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/" target="_blank" rel="noopener noreferrer">StatefulSets</a> are ideal for deploying, maintaining, and scaling simple stateless applications, they are not equipped to handle access to stateful resources, or to upgrade, resize, and backup of more elaborate clustered applications such as databases. A Kubernetes Operator fills in the gaps between the capabilities and automation provided by Kubernetes and how your software uses Kubernetes for automation of tasks relevant to your software.</p><p>An Operator is basically an application-specific controller that can help you manage a Kubernetes application. It is a way to package, run, and maintain a Kubernetes application. It is designed to extend the capabilities of Kubernetes, and also simplify application management. This is especially useful for stateful applications, which include persistent storage and other elements external to the application, and may require extra work to manage and maintain.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>The Operator Framework is an open source project that provides developer and runtime Kubernetes tools, enabling you to accelerate the development of an operator.
<a href="https://operatorframework.io/" target="_blank" rel="noopener noreferrer">Learn more about operator framework here</a></p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="functions-of-kubernetes-operators">Functions of Kubernetes Operators<a class="hash-link" href="#functions-of-kubernetes-operators" title="Direct link to heading">​</a></h3><p>A Kubernetes Operator uses the Kubernetes API server to create, configure, and manage instances of complex stateful applications on behalf of a Kubernetes user. There is a public repository called <a href="https://operatorhub.io" target="_blank" rel="noopener noreferrer">OperatorHub.io</a> that is designed to be the public registry for finding Kubernetes Operator backend services. With Operator Hub, developers can easily create an application based on an operator without going through the complexity of crafting an operator from scratch.</p><p><img loading="lazy" alt="alt_text" src="/assets/images/image6-2382df7cc9d1f38c995144f08a030e4a.png" width="1246" height="812" class="img_ev3q"></p><p>Below are a few examples of popular Kubernetes Operators and their functions and capabilities.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="kubernetes-operators">Kubernetes Operators:<a class="hash-link" href="#kubernetes-operators" title="Direct link to heading">​</a></h4><ul><li>Helps you deploy an application on demand (for example, <a href="https://operatorhub.io/operator/argocd-operator-helm" target="_blank" rel="noopener noreferrer">Argo CD operator (Helm</a> is a declarative, GitOps continuous delivery tool for Kubernetes that helps with easy installation and configuration on demand)</li><li>Helps you install applications with the required configurations and number of application instances</li><li>Allows you to take and restore backups of the application state (for example, <a href="https://github.com/vmware-tanzu/velero" target="_blank" rel="noopener noreferrer">Velero operator</a> manages disaster recovery, backup, and restoration of cluster components such as pv, pvc, deployments, etc., to aid in disaster recovery)</li><li>Handles the upgrades of the application code plus the changes, such as database schema (for example, <a href="https://fluxcd.io/" target="_blank" rel="noopener noreferrer">Flux </a> is a continuous delivery solution for Kubernetes that allows automating updates to configuration when there is new code to deploy)</li><li>Can manage a cluster of database servers (for example, <a href="https://operatorhub.io/operator/mariadb-operator-app" target="_blank" rel="noopener noreferrer">MariaDB operator</a> creates MariaDB server and database easily by defining simple custom resource)</li><li>Can install a database cluster of a declared software version and number of members</li><li>Scale applications in or out</li><li>Continues to monitor an application as it runs (for example, <a href="https://operatorhub.io/operator/prometheus" target="_blank" rel="noopener noreferrer">Prometheus Operator </a> simplifies the deployment and configuration of Prometheus, Alertmanager, and related monitoring components)</li><li>Initiate upgrades, automated backups, and failure recovery, simulating failure in all or part of your cluster to test its resilience</li><li>Allows you to publish a service to applications that don’t support Kubernetes APIs to discover them</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-does-an-operator-work">How does an Operator work?<a class="hash-link" href="#how-does-an-operator-work" title="Direct link to heading">​</a></h3><p>Operators work by extending the Kubernetes control plane and API server. Operators allows you to define a Custom Controller that watches your application and performs custom tasks based on its state. The application you want to watch is usually defined in Kubernetes as a new object: a <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" target="_blank" rel="noopener noreferrer">Custom Resource</a> (CR) that has its own YAML spec and object type that is well understood by the API server. That way, you can define any specific criteria in the custom spec to watch out for, and reconcile the instance when it doesn’t match the spec. The way an Operator’s controller reconciles against a spec is very similar to native Kubernetes controllers, though it is using mostly custom components.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-is-the-redis-enterprise-operator">What is the Redis Enterprise Operator?<a class="hash-link" href="#what-is-the-redis-enterprise-operator" title="Direct link to heading">​</a></h3><iframe width="760" height="415" src="https://www.youtube.com/embed/VjQZScpBj-I" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe><p>Redis has created an <a href="https://docs.redis.com/6.0/platforms/kubernetes/concepts/operator/" target="_blank" rel="noopener noreferrer">Operator</a> that deploys and manages the lifecycle of a Redis Enterprise Cluster. <a href="https://operatorhub.io/operator/redis-enterprise" target="_blank" rel="noopener noreferrer">The Redis Enterprise Operator</a> is the fastest, most efficient way to deploy and maintain a Redis Enterprise cluster in Kubernetes. The Operator creates, configures, and manages Redis Enterprise deployments from a single Kubernetes control plane. This means that you can manage Redis Enterprise instances on Kubernetes just by creating native objects, such as a Deployment, ReplicaSet, StatefulSet, etc. Operators allow full control over the Redis Enterprise cluster lifecycle.</p><p>The Redis Enterprise Operator acts as a <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/#custom-controllers" target="_blank" rel="noopener noreferrer">custom controller</a> for the custom resource Redis Enterprise Cluster, or “REC”, which is defined through Kubernetes CRD (<a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/#custom-resources" target="_blank" rel="noopener noreferrer">customer resource definition</a>) and deployed with a YAML file.The Redis Enterprise Operator functions as the logic “glue” between the Kubernetes infrastructure and the Redis Enterprise cluster.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-does-the-redis-enterprise-operator-work">How does the Redis Enterprise Operator work?<a class="hash-link" href="#how-does-the-redis-enterprise-operator-work" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="alt_text" src="/assets/images/image7-a53d07a9fa4d9521e7cb5e3ed1fdb1c5.png" width="1676" height="1202" class="img_ev3q"></p><p>The Redis Enterprise Operator supports two Custom Resource Definitions (CRDs):</p><ul><li><strong>Redis Enterprise Cluster </strong>(REC): An API to create Redis Enterprise clusters. Note that only one cluster is supported per Operator deployment.</li><li><strong>Redis Enterprise Database </strong>(REDB): An API to create Redis databases running on the Redis Enterprise cluster. Note that the Redis Enterprise Operator is namespaced. High-level architecture and overview of the solution can be found <a href="https://docs.redislabs.com/latest/platforms/kubernetes/" target="_blank" rel="noopener noreferrer">HERE</a>.</li></ul><p>This is how it works:</p><ol><li>First, the Redis Enterprise cluster custom resource (“CR” for short) is read and validated by the operator for a cluster specification.</li><li>Secondly, cluster StatefulSet, service rigger, cluster admin secrets, RS/UI services are created.</li><li>A Redis Enterprise Database CR is read and validated by the operator.</li><li>The database is created on the cluster and the database access credentials are stored in a Kubernetes secret object.</li><li>The service rigger discovers the new database and configures the Kubernetes service for the database.</li><li>An application workload uses the database secret and service for access to data.</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example-of-operator-automation">Example of Operator automation<a class="hash-link" href="#example-of-operator-automation" title="Direct link to heading">​</a></h3><p>Consider the YAML file below:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: app.redislabs.com/v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: RedisEnterpriseCluster</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: rec</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # Add fields here</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  nodes: 3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you change the number of nodes to 5, the Operator talks to StatefulSets, and changes the number of replicas from 3 to 5. Once that happens, Kubernetes will take over and bootstrap new Nodes one at a time, deploying Pods accordingly. As each becomes ready, the new Nodes join the cluster and become available to Redis Enterprise master Nodes.</p><p><img loading="lazy" alt="alt_text" src="/assets/images/image8-eee52222bd4f1f03666ff55d063d9d77.png" width="1230" height="716" class="img_ev3q"></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: app.redislabs.com/v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind: RedisEnterpriseDatabase</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: redis-enterprise-database</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  redisEnterpriseCluster:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name: redis-enterprise</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Memory: 2G</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="alt_text" src="/assets/images/image9-19d2f3b3190b96fc273842668b952ada.png" width="1518" height="1506" class="img_ev3q"></p><p>In order to create a database, the Operator discovers the resources, talks to the cluster RestAPI, and then it creates the database. The server talks to the API and discovers it. The DB creates a Redis database service endpoint for that database and that will be available.</p><p>In the next tutorial, you will learn how to get started with the Redis Enterprise Kubernetes Operator from scratch, including how to perform non-trivial tasks such as backup, restore, horizontal scaling, and much more. Stay tuned!</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="references">References<a class="hash-link" href="#references" title="Direct link to heading">​</a></h3><ul><li><a href="/create/kubernetes/">Create Redis database on Google Kubernetes Engine</a></li><li><a href="https://docs.redis.com/latest/kubernetes/deployment/quick-start/" target="_blank" rel="noopener noreferrer">Redis Enterprise Software on Kubernetes architecture </a></li><li><a href="https://docs.redis.com/latest/kubernetes/deployment/quick-start/" target="_blank" rel="noopener noreferrer">Deploy Redis Enterprise Software on Kubernetes</a></li><li><a href="https://operatorframework.io/" target="_blank" rel="noopener noreferrer">Operator Framework</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/redis-developer/redis-developer/edit/master/docs/create/kubernetes/kubernetes-operator/index-kubernetes-operator.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-10-26T20:47:21.000Z">Oct 26, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#stateful-vs-stateless-applications" class="table-of-contents__link toc-highlight">Stateful vs Stateless Applications</a></li><li><a href="#scaling-stateful-application-is-hard" class="table-of-contents__link toc-highlight">Scaling stateful application is hard</a></li><li><a href="#functions-of-kubernetes-operators" class="table-of-contents__link toc-highlight">Functions of Kubernetes Operators</a></li><li><a href="#how-does-an-operator-work" class="table-of-contents__link toc-highlight">How does an Operator work?</a></li><li><a href="#what-is-the-redis-enterprise-operator" class="table-of-contents__link toc-highlight">What is the Redis Enterprise Operator?</a></li><li><a href="#how-does-the-redis-enterprise-operator-work" class="table-of-contents__link toc-highlight">How does the Redis Enterprise Operator work?</a></li><li><a href="#example-of-operator-automation" class="table-of-contents__link toc-highlight">Example of Operator automation</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><svg width="785" height="158" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="shape"><defs><path d="M786.344 392.459c-41.822 22.164-258.313 110.84-305.056 135.477-46.742 24.637-72.163 23.812-108.246 6.57-36.082-17.24-267.334-111.664-309.156-131.377-41.822-19.713-42.642-33.657-1.64-49.271C103.25 338.265 332.86 247.94 381.243 229.875c48.383-18.065 65.604-18.065 106.605-2.473 41.003 15.614 256.674 100.996 297.676 115.785 41.002 14.791 42.642 27.912.82 49.273v-.001z" id="a"></path><mask id="b" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="785" height="331" fill="#fff"><use xlink:href="#a"></use></mask></defs><use mask="url(#b)" xlink:href="#a" transform="translate(-32 -216)" stroke="#465282" stroke-width="4" fill="none" fill-rule="evenodd" stroke-dasharray="3.637"></use></svg><img src="/img/code-2.png" class="code" alt=""><div class="row"><div class="col col--3"><div class="footer__logo-ctr"><span class="footer__logo-tagline">Made with &lt;/&gt; by</span><a href="https://redis.com/" target="_blank" rel="noopener" class="footerLogoLink_fGS1"><img loading="lazy" class="footer__logo" alt="Redis logo" src="/img/redis_logo_red_white_rgb.svg"></a></div></div><div class="col col--9"><div class="row footer__links"><div class="col col--4 footer__col"><h4 class="footer__title">Get Started</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/develop/">Develop</a></li><li class="footer__item"><a href="https://redis.com/redis-best-practices/introduction/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Best Practices</a></li></ul></div><div class="col col--4 footer__col"><h4 class="footer__title">Resources</h4><ul class="footer__items"><li class="footer__item"><a href="https://redis.com/community/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community</a></li><li class="footer__item"><a href="https://university.redis.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Redis University</a></li><li class="footer__item"><a href="https://redis.io/commands" target="_blank" rel="noopener noreferrer" class="footer__link-item">Redis Commands</a></li><li class="footer__item"><a href="https://stackoverflow.com/search?q=redis" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div></div></div></div><div class="footer__copyright">Copyright: © 2024 Redis. All rights reserved. Redis and the cube logo are registered trademarks of Redis Ltd.</div></div></footer></div>
<script src="/assets/js/runtime~main.bb8e0787.js"></script>
<script src="/assets/js/main.953e99e4.js"></script>
</body>
</html>