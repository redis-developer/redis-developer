<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-howtos/socialnetwork/index-socialnetwork">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">How to Build a Social Network Application using Redis Stack and NodeJS | The Home of Redis Developers</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.redis.com/img/redis-hero-image.jpg"><meta data-rh="true" name="twitter:image" content="https://developer.redis.com/img/redis-hero-image.jpg"><meta data-rh="true" property="og:url" content="https://developer.redis.com/howtos/socialnetwork/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="How to Build a Social Network Application using Redis Stack and NodeJS | The Home of Redis Developers"><meta data-rh="true" name="description" content="image"><meta data-rh="true" property="og:description" content="image"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://developer.redis.com/howtos/socialnetwork/"><link data-rh="true" rel="alternate" href="https://developer.redis.com/howtos/socialnetwork/" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.redis.com/howtos/socialnetwork/" hreflang="x-default"><script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-W8Z6BLQ",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/assets/css/styles.b5561ee1.css">
<link rel="preload" href="/assets/js/runtime~main.a6913d11.js" as="script">
<link rel="preload" href="/assets/js/main.14dee982.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W8Z6BLQ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:rgb(210, 215, 254);color:rgb(22 31 49)" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY"><div class="announcement-bar"><a href="https://redis.com/blog/introducing-redis-7-2/" target="_blank" rel="noopener"><span>Announcing Redis 7.2 and Enhanced Vector DB</span> <span style="margin-left:1rem">Learn more</span> <span style="margin-left:0.25rem">→</span></a></div></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-1.png" alt="Redis Developer Hub logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-1.png" alt="Redis Developer Hub logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><div id="redis-sitesearch" class="redis-sitesearch redis-sitesearch-inline"><input class="redis-sitesearch-input"><div class="redis-sitesearch-result-list-wrapper"><ul class="redis-sitesearch-result-list"></ul><div class="redisearch-logo"></div></div></div></div><a class="navbar__item navbar__link" href="/howtos/quick-start">Get started</a><a href="https://launchpad.redis.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Redis Launchpad<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://redis.com/try-free/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Try Free<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo-1.png" alt="Redis Developer Hub logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-1.png" alt="Redis Developer Hub logo" class="themedImage_ToTc themedImage--dark_i4oU"></a><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Home</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/howtos/quick-start">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/create">Create</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/develop">Develop</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/explore">Explore</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/operate/observability/redisdatasource">Operate</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/howtos/quick-start/cheat-sheet">HowTos &amp; Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/quick-start/cheat-sheet">Cheat sheet</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/howtos/solutions">Solutions</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/leaderboard">How to build a Real-Time Leaderboard app Using Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/ratelimiting">How to build a Rate Limiter using Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/caching">How to cache REST API responses Using Redis &amp; NodeJS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/howtos/moviesdatabase/install">How to list &amp; search Movies database using Redis Stack</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/chatapp">How to build a Chat application using Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/frauddetection">How to build a Fraud Detection System using Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/nlp">Building a Pipeline for Natural Language Processing using RedisGears</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/redisai/bert-qa-benchmarking-with-redisai-and-redisgears">Benchmarks for BERT Large Question Answering inference for RedisAI and RedisGears</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/hackernews">How to build a HackerNews Clone using Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/antipatterns/">Redis Anti-Patterns Every Developer Should Avoid</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/howtos/socialnetwork/">Building a Social Network Application using Redis Stack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/security/">How to Use SSL/TLS With Redis Enterprise</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/analytics">Building an Analytics dashboard app using Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/popupstore">Building a Popup Store application using Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/herokunodejs">How to build a NodeJS based application on Heroku using Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/herokupython">How to build a Python based application on Heroku using Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/howtos/herokujava">How to build a Java based application on Heroku using Redis</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/community/">Get Involved</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ebooks/8-nosql-data-modeling-patterns">E-books</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">HowTos &amp; Tutorials</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Building a Social Network Application using Redis Stack</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>How to Build a Social Network Application using Redis Stack and NodeJS</h1></header><div class="docAuthors"><hr><div class="authorByline_VoxI"><img class="authorProfileImage_URwT" src="/img/profile_pic_julian_mateu.jpg" alt="Profile picture for Julian Mateu"><div><div class="authorLabel_a70t">Author:</div><div><a href="https://www.linkedin.com/in/julian-mateu" target="_blank">Julian Mateu</a>, <!-- -->Sr. Backend Software Engineer at Globality, Inc.</div></div></div><div class="authorByline_VoxI"><img class="authorProfileImage_URwT" src="/img/profile_pic_manuel_aguirre.jpg" alt="Profile picture for Manuel Aguirre"><div><div class="authorLabel_a70t">Author:</div><div><a href="https://github.com/manuelaguirre" target="_blank">Manuel Aguirre</a>, <!-- -->Backend Engineer at Baseline Spain</div></div></div><hr></div><p><img loading="lazy" alt="image" src="/assets/images/socialnetwork-826a3451d7cf05bf179d96fa74c0e72c.png" width="2374" height="1580" class="img_ev3q"></p><p>In this blog post we’ll build a social network application using Redis Stack and NodeJS. This is the idea that we used for our app <a href="https://www.youtube.com/watch?v=18NPKZy28cQ" target="_blank" rel="noopener noreferrer">Skillmarket</a>.</p><p>The goal of the application is to match users with complementary skills. It will allow users to register and provide some information about themselves, like location, areas of expertise and interests. Using search in Redis Stack it will match two users who are geographically close, and have complementary areas of expertise and interests, e.g., one of them knows French and want to learn Guitar and the other knows Guitar and want to learn French.</p><p>The full source code of our application can be found in GitHub (note that we used some features like <code><a href="https://oss.redis.com/redisearch/Commands/#ftadd" target="_blank" rel="noopener noreferrer">FT.ADD</a></code> which now are deprecated):</p><ul><li><a href="https://github.com/julianmateu/skillmarket-backend" target="_blank" rel="noopener noreferrer">Skillmarket Backend</a></li><li><a href="https://github.com/julianmateu/skillmarket-front" target="_blank" rel="noopener noreferrer">Skillmarket Frontend</a></li></ul><p>We will be using a more condensed version of the backend which can be found in the <a href="https://github.com/julianmateu/skillmarket-blogpost" target="_blank" rel="noopener noreferrer">Skillmarket Blogpost</a> GitHub repo.</p><p>Refer to the <a href="https://github.com/RediSearch/redisearch-getting-started" target="_blank" rel="noopener noreferrer">official tutorial</a> for more information about search in Redis Stack.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="getting-familiar-with-search-in-redis-stack">Getting Familiar with search in Redis Stack<a class="hash-link" href="#getting-familiar-with-search-in-redis-stack" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="launching-search-in-redisstack-in-a-docker-container">Launching search in RedisStack in a Docker container<a class="hash-link" href="#launching-search-in-redisstack-in-a-docker-container" title="Direct link to heading">​</a></h3><p>Let’s start by launching Redis from the Redis Stack image using Docker:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -d --name redis redis/redis-stack:latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here we use the <code>docker run</code> command to start the container and pull the image if it is not present. The <code>-d</code> flag tells docker to launch the container in the background (detached mode). We provide a name with <code>--name redis</code> which will allow us to refer to this container with a friendly name instead of the hash or the random name docker will assign to it.</p><p>Finally, <code>redislabs/readisearch:latest</code> tells docker to use the <code>latest</code> version of the <code><a href="https://hub.docker.com/r/redislabs/redisearch" target="_blank" rel="noopener noreferrer">redislabs/readisearch image</a></code></p><p>Once the image starts, we can use <code>docker exec</code> to launch a terminal inside the container, using the <code>-it</code> flag (interactive tty) and specifying the <code>redis</code> name provided before when creating the image, and the <code>bash</code> command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker exec -it redis bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once inside the container, let’s launch a <code>redis-cli</code> instance to familiarize ourselves with the CLI:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You will notice the prompt now indicates we’re connected to <code>127.0.0.1:6379</code></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="creating-users">Creating Users<a class="hash-link" href="#creating-users" title="Direct link to heading">​</a></h3><p>We’ll use a Hash as the data structure to store information about our users. This will be a proof of concept, so our application will only use Redis as the data store. For a real life scenario, it would probably be better to have a primary data store which is the authoritative source of user data, and use Redis as the search index which can be used to speed up searches.</p><p>In a nutshell, you can think of a hash as a key/value store where the key can be any string we want, and the values are a document with several fields. It’s common practise to use the hash to store many different types of objects, so they can be prefixed with their type, so a key would take the form of &quot;object_type:id&quot;.</p><p>An index will then be used on this hash data structure, to efficiently search for values of given fields. The following diagram taken from the search docs exeplifies this with a database for movies:</p><p><img loading="lazy" alt="alt_text" src="/assets/images/searchindex-7e01db6630f70050d4d27a6d7b8a6c4d.png" width="1298" height="714" class="img_ev3q"></p><p>Use the <code>help @hash</code> command (or refer to the <a href="https://redis.io/commands#hash" target="_blank" rel="noopener noreferrer">documentation</a>) to get a list of commands that can be used to manipulate hashes. To get help for a single command, like <code>HSET</code> let’s type <code>help HSET</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">127.0.0.1:6379&gt; help hset</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  HSET key field value [field value ...]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  summary: Set the string value of a hash field</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  since: 2.0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  group: hash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As we see, we can provide a key and a list of <code>field value</code> pairs.</p><p>We’ll create a user in the hash table by using <code>user:id</code> as the key, and we’ll provide the fields <code>expertises</code>, <code>interests</code> and <code>location</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">HSET users:1 name &quot;Alice&quot; expertises &quot;piano, dancing&quot; interests &quot;spanish, bowling&quot; location &quot;2.2948552,48.8736537&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HSET users:2 name &quot;Bob&quot; expertises &quot;french, spanish&quot; interests &quot;piano&quot; location &quot;2.2945412,48.8583206&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HSET users:3 name &quot;Charles&quot; expertises &quot;spanish, bowling&quot; interests &quot;piano, dancing&quot; location &quot;-0.124772,51.5007169&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="query-to-match-users">Query to match users<a class="hash-link" href="#query-to-match-users" title="Direct link to heading">​</a></h3><p>Here we can see the power of the search index, which allows us to query by <a href="https://oss.redis.com/redisearch/Tags/" target="_blank" rel="noopener noreferrer">tags</a> (we provide a list of values, such as interests, and it will return any user whose interests match at least one value in the list), and <a href="https://oss.redis.com/redisearch/Query_Syntax/#geo_filters_in_query" target="_blank" rel="noopener noreferrer">Geo</a> (we can ask for users whose location is at a given radius in km from a point).</p><p>To be able to do this, we have to instruct search to create an index:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">FT.CREATE idx:users ON hash PREFIX 1 &quot;users:&quot; SCHEMA interests TAG expertises TAG location GEO</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We use the <code><a href="https://oss.redis.com/redisearch/Commands/#ftcreate" target="_blank" rel="noopener noreferrer">FT.CREATE</a></code> command to create a full text search index named <code>idx:users</code>. We specify <code>ON hash</code> to indicate that we’re indexing the hash table, and provide <code>PREFIX 1 &quot;users:&quot;</code> to indicate that we should index any document whose key starts with the prefix “users:”. Finally we indicate the <code>SCHEMA</code> of the index by providing a list of fields to index, and their type.</p><p>Finally, we can query the index using the <code><a href="https://oss.redis.com/redisearch/Commands/#ftsearch" target="_blank" rel="noopener noreferrer">FT.SEARCH</a></code> command (see the <a href="https://oss.redis.com/redisearch/Query_Syntax/#search_query_syntax" target="_blank" rel="noopener noreferrer">query syntax reference</a>):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">127.0.0.1:6379&gt; FT.SEARCH idx:users &quot;@interests:{dancing|piano} @expertises:{spanish|bowling} @location:[2.2948552 48.8736537 5 km]&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1) (integer) 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2) &quot;users:2&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3) 1) &quot;name&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   2) &quot;Bob&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   3) &quot;expertises&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   4) &quot;french, spanish&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   5) &quot;interests&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   6) &quot;piano&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   7) &quot;location&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   8) &quot;2.2945412,48.8583206&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this case we’re looking for matches for Alice, so we use her expertises in the <code>interests</code> field of the query, and her interests in the <code>expertises</code> field. We also search for users in a 5km radius from her location, and we get Bob as a match.</p><p>If we expand the search radius to 500km we’ll also see that Charles is returned:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">127.0.0.1:6379&gt; FT.SEARCH idx:users &quot;@interests:{dancing|piano} @expertises:{spanish|bowling} @location:[2.2948552 48.8736537 500 km]&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1) (integer) 2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2) &quot;users:3&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3) 1) &quot;name&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   2) &quot;Charles&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   3) &quot;expertises&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   4) &quot;spanish, bowling&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   5) &quot;interests&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   6) &quot;piano, dancing&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   7) &quot;location&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   8) &quot;-0.124772,51.5007169&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">4) &quot;users:2&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">5) 1) &quot;name&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   2) &quot;Bob&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   3) &quot;expertises&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   4) &quot;french, spanish&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   5) &quot;interests&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   6) &quot;piano&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   7) &quot;location&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   8) &quot;2.2945412,48.8583206&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cleaning-up">Cleaning Up<a class="hash-link" href="#cleaning-up" title="Direct link to heading">​</a></h3><p>We can now remove the docker instance and move on to building the web application, running the following command from outside the instance:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> docker rm -f redis</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="building-a-minimal-backend-in-typescript">Building a minimal backend in Typescript<a class="hash-link" href="#building-a-minimal-backend-in-typescript" title="Direct link to heading">​</a></h3><p>After understanding how the index works, let’s build a minimal backend API in NodeJS that will allow us to create a user, and query for matching users.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This is just an example, and we’re not providing proper validation or error handling, nor other features required for the backend (e.g. authentication).</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="redis-client">Redis client<a class="hash-link" href="#redis-client" title="Direct link to heading">​</a></h3><p>We’ll use the <a href="https://www.npmjs.com/package/redis" target="_blank" rel="noopener noreferrer">node-redis</a> package to create a client:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">const {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    REDIS_PORT = 6379,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    REDIS_HOST = &#x27;localhost&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">} = process.env;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">const client: RediSearchClient = createClient({</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    port: Number(REDIS_PORT),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    host: REDIS_HOST,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>All the functions in the library use callbacks, but we can use <code>promisify</code> to enable the <code>async/await</code> syntax:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">client.hgetallAsync = promisify(client.hgetall).bind(client);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">client.hsetAsync = promisify(client.hset).bind(client);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">client.ft_createAsync = promisify(client.ft_create).bind(client);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">client.ft_searchAsync = promisify(client.ft_search).bind(client);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, let’s define a function to create the user index, as we did before in the CLI example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">async function createUserIndex() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    client.ft_createAsync(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;idx:users&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        [&#x27;ON&#x27;, &#x27;hash&#x27;, &#x27;PREFIX&#x27;, &#x27;1&#x27;, &#x27;users:&#x27;, &#x27;SCHEMA&#x27;, &#x27;interests&#x27;, &#x27;TAG&#x27;, &#x27;expertises&#x27;, &#x27;TAG&#x27;, &#x27;location&#x27;, &#x27;GEO&#x27;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="user-controller">User controller<a class="hash-link" href="#user-controller" title="Direct link to heading">​</a></h3><p>Let’s define the functions that the controller will use to expose a simple API on top of Redis. We’ll define 3 functions: - <code>findUserById(userId)</code> - <code>createUser(user)</code> - <code>findMatchesForUser(user)</code></p><p>But first let’s define the model we’ll use for the users:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">interface Location {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    latitude: number;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    longitude: number;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">};</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">interface User {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    id?: string;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name: string;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    interests: string[];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    expertises: string[];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    location: Location</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let’s start with the function to create a user from the model object:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">async function createUser(user: User): Promise&lt;string&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    const id = uuid();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    redisearchClient.hsetAsync(`users:${id}`, _userToSetRequestString(user));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return id;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function _userToSetRequestString(user: User): string[] {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    const { id, location, interests, expertises, ...fields } = user;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    let result = Object.entries(fields).flat();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    result.push(&#x27;interests&#x27;, interests.join(&#x27;, &#x27;));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    result.push(&#x27;expertises&#x27;, expertises.join(&#x27;, &#x27;));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    result.push(&#x27;location&#x27;, `${location.longitude},${location.latitude}`);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return result;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We will create a UUID for the user, and then transform the TAG and GEO fields to the redis format. Here’s an example of how these two formats look like:</p><p><img loading="lazy" alt="my image" src="/assets/images/image_socialnetwork-07f7d7d7f2a5536e6493575ac71d8f88.png" width="1292" height="612" class="img_ev3q"></p><p>Let’s now look at the logic to retrieve an existing user from the Hash table using <code>HGETALL</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">async function findUserById(userId: string): Promise&lt;User&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    const response = await redisearchClient.hgetallAsync(`users:${userId}`);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if (!response) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        throw new Error(&#x27;User Not Found&#x27;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return _userFromFlatEntriesArray(userId, Object.entries(response).flat());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function _userFromFlatEntriesArray(id: string, flatEntriesArray: any[]): User {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   let user: any = {};</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // The flat entries array contains all keys and values as elements in an array, e.g.:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // [key1, value1, key2, value2]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    for (let j = 0; j &lt; flatEntriesArray.length; j += 2) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       let key: string = flatEntriesArray[ j ];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        let value: string = flatEntriesArray[ j + 1 ];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        user[ key ] = value;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    const location: string[] = user.location.split(&#x27;,&#x27;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    user.location = { longitude: Number(location[ 0 ]), latitude: Number(location[ 1 ]) };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    user.expertises = user.expertises.split(&#x27;, &#x27;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    user.interests = user.interests.split(&#x27;, &#x27;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return {id, ...user};</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here we have the inverse logic, where we want to split the TAG and GEO fields into a model object. There’s also the fact that <code>HGETALL</code> returns the field names and values in an array, and we need to build the model object from that.</p><p>Let’s finally take a look at the logic to find matches for a given user:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">async function findMatchesForUser(user: User, radiusKm: number): Promise&lt;User[]&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   const allMatches: User[] = await _findMatches(user.interests, user.expertises, user.location, radiusKm);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      return allMatches.filter(u =&gt; u.id !== user.id);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">async function _findMatches(expertises: string[], interests: string[], location: Location, radiusKm: number): Promise&lt;User[]&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   let query = `@interests:{${interests.join(&#x27;|&#x27;)}}`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      query += ` @expertises:{${expertises.join(&#x27;|&#x27;)}}`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      query += ` @location:[${location.longitude} ${location.latitude} ${radiusKm} km]`;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      const response = await redisearchClient.ft_searchAsync(&#x27;idx:users&#x27;, query);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      return _usersFromSearchResponseArray(response);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function _usersFromSearchResponseArray(response: any[]): User[] {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   let users = [];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      // The search response is an array where the first element indicates the number of results, and then</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      // the array contains all matches in order, one element is they key and the next is the object, e.g.:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      // [2, key1, object1, key2, object2]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      for (let i = 1; i &lt;= 2 * response[ 0 ]; i += 2) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         const user: User = _userFromFlatEntriesArray(response[ i ].replace(&#x27;users:&#x27;, &#x27;&#x27;), response[ i + 1 ]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         users.push(user);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      return users;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here we swap interests and expertises to find the complementary skill set, and we build the query that we used previously in the CLI example. we finally call the <code>FT.SEARCH</code> function, and we build the model object from the response, which comes as an array. Results are filtered to exclude the current user from the matches list.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="web-api">Web API<a class="hash-link" href="#web-api" title="Direct link to heading">​</a></h3><p>Finally, we can build a trivial web API using express, exposing a <code>POST /users</code> endpoint to create a user, a <code>GET /users/:userId</code> endpoint to retrieve a user, and a <code>GET /users/:userId/matches</code> endpoint to find matches for the given user (the desired <code>radiusKm</code> can be optionally specified as a query parameter)</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">app.post(&#x27;/users&#x27;, async (req, res) =&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    const user: User = req.body;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if (!user || !user.name || !user.expertises || !user.interests || user.location.latitude === undefined || user.location.longitude === undefined) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        res.status(400).send(&#x27;Missing required fields&#x27;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        const userId = await userController.createUser(user);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        res.status(200).send(userId);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">app.get(&quot;/users/:userId&quot;, async (req, res) =&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        const user: User = await userController.findUserById(req.params.userId);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        res.status(200).send(user);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (e) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        res.status(404).send();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">app.get(&quot;/users/:userId/matches&quot;, async (req, res) =&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        const radiusKm: number = Number(req.query.radiusKm) || 500;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        const user: User = await userController.findUserById(req.params.userId);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        const matches: User[] = await userController.findMatchesForUser(user, radiusKm);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        res.status(200).send(matches);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    } catch (e) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        console.log(e)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        res.status(404).send();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="full-code-example">Full code example<a class="hash-link" href="#full-code-example" title="Direct link to heading">​</a></h3><p>The code used in this blogpost can be found in the <a href="https://github.com/julianmateu/skillmarket-blogpost" target="_blank" rel="noopener noreferrer">GitHub repo</a>. The backend together with redis can be launched using docker compose:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> docker compose up -d --build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The backend API will be exposed on port <code>8080</code>. We can see the logs with <code>docker compose logs</code>, and use a client to query it. Here’s an example using httpie:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">http :8080/users \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   name=&quot;Alice&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   expertises:=&#x27;[&quot;piano&quot;, &quot;dancing&quot;]&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   interests:=&#x27;[&quot;spanish&quot;, &quot;bowling&quot;]&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   location:=&#x27;{&quot;longitude&quot;: 2.2948552, &quot;latitude&quot;: 48.8736537}&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">----------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HTTP/1.1 200 OK</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Connection: keep-alive</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Length: 36</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Type: text/html; charset=utf-8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Date: Mon, 01 Nov 2021 05:24:52 GMT</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ETag: W/&quot;24-dMinMMphAGzfWiCs49RBYnyK+r8&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Keep-Alive: timeout=5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">X-Powered-By: Express</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">03aef405-ef37-4254-ab3c-a5ddfbc4f04e</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">http &quot;:8080/users/03aef405-ef37-4254-ab3c-a5ddfbc4f04e/matches?radiusKm=15&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HTTP/1.1 200 OK</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Connection: keep-alive</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Length: 174</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Type: application/json; charset=utf-8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Date: Mon, 01 Nov 2021 05:26:29 GMT</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ETag: W/&quot;ae-3k2/swmuFaJd7BNHrkgvS/S+h2g&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Keep-Alive: timeout=5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">X-Powered-By: Express</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;expertises&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;french&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot; spanish&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;id&quot;: &quot;58e81f09-d9fa-4557-9b8f-9f48a9cec328&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;interests&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;piano&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;location&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;latitude&quot;: 48.8583206,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;longitude&quot;: 2.2945412</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;name&quot;: &quot;Bob&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally cleanup the environment:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker compose down --volumes --remove-orphans</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="references">References<a class="hash-link" href="#references" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/julianmateu/skillmarket-backend" target="_blank" rel="noopener noreferrer">Skillmarket Backend</a></li><li><a href="https://github.com/julianmateu/skillmarket-front" target="_blank" rel="noopener noreferrer">Skillmarket Frontend</a></li><li><a href="https://github.com/RediSearch/redisearch-getting-started" target="_blank" rel="noopener noreferrer">Search Tutorial</a></li></ul><h2></h2><div><a href="https://launchpad.redis.com" target="_blank" rel="noopener" class="link"><img loading="lazy" src="/img/launchpad.png" class="thumb img_ev3q" alt="Redis Launchpad"></a></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/redis-developer/redis-developer/edit/master/docs/howtos/socialnetwork/index-socialnetwork.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-06-14T19:44:39.000Z">Jun 14, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/howtos/antipatterns/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Redis Anti-Patterns Every Developer Should Avoid</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/howtos/security/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How to Use SSL/TLS With Redis Enterprise</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#getting-familiar-with-search-in-redis-stack" class="table-of-contents__link toc-highlight">Getting Familiar with search in Redis Stack</a><ul><li><a href="#launching-search-in-redisstack-in-a-docker-container" class="table-of-contents__link toc-highlight">Launching search in RedisStack in a Docker container</a></li><li><a href="#creating-users" class="table-of-contents__link toc-highlight">Creating Users</a></li><li><a href="#query-to-match-users" class="table-of-contents__link toc-highlight">Query to match users</a></li><li><a href="#cleaning-up" class="table-of-contents__link toc-highlight">Cleaning Up</a></li><li><a href="#building-a-minimal-backend-in-typescript" class="table-of-contents__link toc-highlight">Building a minimal backend in Typescript</a></li><li><a href="#redis-client" class="table-of-contents__link toc-highlight">Redis client</a></li><li><a href="#user-controller" class="table-of-contents__link toc-highlight">User controller</a></li><li><a href="#web-api" class="table-of-contents__link toc-highlight">Web API</a></li><li><a href="#full-code-example" class="table-of-contents__link toc-highlight">Full code example</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><svg width="785" height="158" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="shape"><defs><path d="M786.344 392.459c-41.822 22.164-258.313 110.84-305.056 135.477-46.742 24.637-72.163 23.812-108.246 6.57-36.082-17.24-267.334-111.664-309.156-131.377-41.822-19.713-42.642-33.657-1.64-49.271C103.25 338.265 332.86 247.94 381.243 229.875c48.383-18.065 65.604-18.065 106.605-2.473 41.003 15.614 256.674 100.996 297.676 115.785 41.002 14.791 42.642 27.912.82 49.273v-.001z" id="a"></path><mask id="b" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="785" height="331" fill="#fff"><use xlink:href="#a"></use></mask></defs><use mask="url(#b)" xlink:href="#a" transform="translate(-32 -216)" stroke="#465282" stroke-width="4" fill="none" fill-rule="evenodd" stroke-dasharray="3.637"></use></svg><img src="/img/code-2.png" class="code" alt=""><div class="row"><div class="col col--3"><div class="footer__logo-ctr"><span class="footer__logo-tagline">Made with &lt;/&gt; by</span><a href="https://redis.com/" target="_blank" rel="noopener" class="footerLogoLink_fGS1"><img loading="lazy" class="footer__logo" alt="Redis logo" src="/img/redis_logo_red_white_rgb.svg"></a></div></div><div class="col col--9"><div class="row footer__links"><div class="col col--4 footer__col"><h4 class="footer__title">Get Started</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/develop/">Develop</a></li><li class="footer__item"><a href="https://redis.com/redis-best-practices/introduction/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Best Practices</a></li></ul></div><div class="col col--4 footer__col"><h4 class="footer__title">Resources</h4><ul class="footer__items"><li class="footer__item"><a href="https://redis.com/community/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community</a></li><li class="footer__item"><a href="https://university.redis.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Redis University</a></li><li class="footer__item"><a href="https://redis.io/commands" target="_blank" rel="noopener noreferrer" class="footer__link-item">Redis Commands</a></li><li class="footer__item"><a href="https://stackoverflow.com/search?q=redis" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div></div></div></div><div class="footer__copyright">Copyright: © 2024 Redis. All rights reserved. Redis and the cube logo are registered trademarks of Redis Ltd.</div></div></footer></div>
<script src="/assets/js/runtime~main.a6913d11.js"></script>
<script src="/assets/js/main.14dee982.js"></script>
</body>
</html>